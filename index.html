<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smooth Full Page Scroll</title>
    <style>
        /* CSS will be inlined for better performance */
        :root {
            --vh: 1vh;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }
        
        body {
            font-family: Arial, sans-serif;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }
        
        .scroll-container {
            height: 100vh;
            height: calc(var(--vh, 1vh) * 100);
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        
        .full-section {
            height: 100vh;
            height: calc(var(--vh, 1vh) * 100);
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            scroll-snap-align: start;
            color: white;
            font-size: 2rem;
            text-align: center;
            padding: 20px;
            position: relative;
        }
        
        .section-1 { background-color: #3498db; }
        .section-2 { background-color: #2ecc71; }
        .section-3 { background-color: #e74c3c; }
        .section-4 { background-color: #9b59b6; }
        
        h1 {
            margin-bottom: 20px;
            font-size: clamp(2rem, 8vw, 4rem);
        }
        
        p {
            font-size: clamp(1rem, 4vw, 1.5rem);
        }
        
        /* Progress indicator */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            z-index: 100;
            background: rgba(255,255,255,0.2);
        }
        
        .scroll-progress-bar {
            height: 100%;
            width: 0%;
            background: white;
            transition: width 0.1s linear;
        }
    </style>
</head>
<body>
    <div class="scroll-progress">
        <div class="scroll-progress-bar"></div>
    </div>
    
    <div class="scroll-container" id="scroller">
        <section class="full-section section-1">
            <h1>Welcome</h1>
            <p>Scroll down to continue</p>
            <div class="scroll-hint">â†“</div>
        </section>
        <section class="full-section section-2">
            <h1>Discover</h1>
            <p>Our amazing features</p>
        </section>
        <section class="full-section section-3">
            <h1>Explore</h1>
            <p>What we have to offer</p>
        </section>
        <section class="full-section section-4">
            <h1>Join Us</h1>
            <p>Start your journey today</p>
        </section>
    </div>

    <script>
        // JavaScript will be loaded here
        document.addEventListener('DOMContentLoaded', function() {
            // First we'll handle the viewport height issue
            function setVH() {
                let vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            }
            
            // Set initial value
            setVH();
            
            // Update on resize or orientation change
            window.addEventListener('resize', setVH);
            window.addEventListener('orientationchange', setVH);
            
            const container = document.getElementById('scroller');
            const progressBar = document.querySelector('.scroll-progress-bar');
            let isScrolling = false;
            let lastScrollTime = 0;
            const scrollDelay = 1000; // ms between scrolls
            
            // Handle scroll events with debouncing
            container.addEventListener('scroll', function() {
                const now = Date.now();
                if (now - lastScrollTime < 100) return;
                lastScrollTime = now;
                
                updateProgressBar();
                
                if (!isScrolling) {
                    isScrolling = true;
                    
                    const sections = Array.from(document.querySelectorAll('.full-section'));
                    const containerHeight = container.clientHeight;
                    const scrollPosition = container.scrollTop + (containerHeight / 2);
                    
                    // Find the closest section
                    let closestSection = null;
                    let closestDistance = Infinity;
                    
                    sections.forEach(section => {
                        const sectionTop = section.offsetTop;
                        const sectionMid = sectionTop + (section.offsetHeight / 2);
                        const distance = Math.abs(scrollPosition - sectionMid);
                        
                        if (distance < closestDistance) {
                            closestDistance = distance;
                            closestSection = section;
                        }
                    });
                    
                    if (closestSection) {
                        // Use smooth scroll only if not already close to the section
                        if (closestDistance > containerHeight * 0.1) {
                            container.scrollTo({
                                top: closestSection.offsetTop,
                                behavior: 'smooth'
                            });
                        }
                    }
                    
                    setTimeout(() => {
                        isScrolling = false;
                    }, scrollDelay);
                }
            }, { passive: true });
            
            // Update progress bar
            function updateProgressBar() {
                const scrollHeight = container.scrollHeight - container.clientHeight;
                const scrollPosition = container.scrollTop;
                const progress = (scrollPosition / scrollHeight) * 100;
                progressBar.style.width = `${progress}%`;
            }
            
            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowDown' || e.key === 'ArrowUp' || e.key === ' ') {
                    e.preventDefault();
                    const currentScroll = container.scrollTop;
                    const containerHeight = container.clientHeight;
                    const direction = (e.key === 'ArrowDown' || e.key === ' ') ? 1 : -1;
                    
                    container.scrollBy({
                        top: direction * containerHeight,
                        behavior: 'smooth'
                    });
                }
            });
            
            // Wheel event for smoother mouse wheel scrolling
            let wheelTimeout;
            container.addEventListener('wheel', function(e) {
                clearTimeout(wheelTimeout);
                e.preventDefault();
                
                const delta = Math.sign(e.deltaY);
                const containerHeight = container.clientHeight;
                
                container.scrollBy({
                    top: delta * containerHeight,
                    behavior: 'smooth'
                });
                
                wheelTimeout = setTimeout(() => {
                    // Allow natural scrolling after a delay
                }, 1000);
            }, { passive: false });
            
            // Touch device support
            let touchStartY = 0;
            let touchEndY = 0;
            
            container.addEventListener('touchstart', function(e) {
                touchStartY = e.touches[0].clientY;
            }, { passive: true });
            
            container.addEventListener('touchend', function(e) {
                touchEndY = e.changedTouches[0].clientY;
                const diff = touchStartY - touchEndY;
                
                if (Math.abs(diff) > 50) {
                    const containerHeight = container.clientHeight;
                    const direction = diff > 0 ? 1 : -1;
                    
                    container.scrollBy({
                        top: direction * containerHeight,
                        behavior: 'smooth'
                    });
                }
            }, { passive: true });
            
            // Initialize progress bar
            updateProgressBar();
        });
    </script>
</body>
</html>
